{"ts":1376953454690,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<?php\ninclude 'config.php';\n//defeat xss=cross-site-scripting\nheader('Access-Control-Allow-Origin: *');\n\n$sql = \"select e.id, e.firstName, e.lastName, e.title, e.picture, count(r.id) reportCount \" . \n\t\t\"from \" . $tabname . \" e left join \" . $tabname . \" r on r.managerId = e.id \" .\n\t\t\"group by e.id order by e.lastName, e.firstName\";\ntry {\n\t$dbh = new PDO(\"mysql:host=$dbhost;dbname=$dbname\", $dbuser, $dbpass);\t\n\t$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\t$stmt = $dbh->query($sql);  \n\t$employees = $stmt->fetchAll(PDO::FETCH_OBJ);\n\t$dbh = null;\n\techo '{\"items\":'. json_encode($employees) .'}'; \n} catch(PDOException $e) {\n\techo '{\"error\":{\"text\":'. $e->getMessage() .'}}'; \n}\n\n\n?>"]],"start1":0,"start2":0,"length1":0,"length2":703}]],"length":703}
